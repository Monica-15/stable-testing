pipeline {
    agent any
stages {     
    stage('nginx Install') {
      agent {         
       docker {          
         image 'nginx'         
     }       
  }       
    parameters {
       choice(name: 'BRANCH', choices: ['main', 'monica', 'monica1'], description: 'select branch too build') 
       }
    stages {
        stage('checkout code') {
            steps {
                git(url: 'https://github.com/Monica-15/stable-testing.git', branch: "${params.BRANCH}", credentialsId: 'github', changelog: true)
                sh 'ls -al'
            }
        }
stage('deploy'){
steps{
git(url: 'https://github.com/Monica-15/stable-testing.git', branch: "${params.BRANCH}", credentialsId: 'github', changelog: true)
    sh 'docker pull nginx'
    sh 'docker build -t nginx .'
    sh 'docker run -d -p 80:80 --name nginx'
    sh 'docker ps'
}
}
}
}
